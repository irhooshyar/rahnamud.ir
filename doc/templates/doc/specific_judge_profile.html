<!DOCTYPE html>
<html lang="fa">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="stylesheet" type="text/css" href="../../static/library/bootstrap.min-4.5.2.css">
        <script src="../../static/js/jquery_351/jquery.min.js"></script>
        <link rel="stylesheet" type="text/css" href="../../static/library/bootstrap.min-5.1.2npm.css">

        <!-- commented for dromdown menu hover bug -->
        <!-- <link href="../../static/library/bootstrap-theme.min-3.3.6.css" rel="stylesheet"> -->
        <script src="../../static/library/bootstrap-5.1.2.bundle.min.js"></script>

        <!--BS Icons -->
        <link rel="stylesheet" href="../../static/library/bootstrap-icons-1.3.0.css">
        <!-- Fontawesome Icons -->

        <link rel="stylesheet" href="../../static/library/fontawesome-5.10.0.all.css"
             />
        <link rel="stylesheet" href="../../static/library/font-awesome.min-4.7.0.css">

        <script src="../../static/library/g6.min-4.3.11.js"></script>


        <link href="../../static/styles/footable/footable.bootstrap.min.css" rel="stylesheet">

        <!-- Footable  -->
        <script src="../../static/js/footable/demo-rows.js"></script>
        <script src="../../static/js/footable/ie10-viewport-bug-workaround.js"></script>
        <script src="../../static/js/footable/footable.js"></script>
        <link href="../../static/styles/footable/footable.bootstrap.min.css" rel="stylesheet">
        <link href="../../static/styles/footable/docs.css" rel="stylesheet">
        <link href="../../static/styles/footable/FooTable.Glyphicons.css" rel="stylesheet">
        <link href="../../static/styles/footable/FooTable.FontAwesome.css" rel="stylesheet">


        <!-- Intro Js -->
        <script src="../../static/library/intro.min-4.3.0.js"></script>
        <link rel="stylesheet" type="text/css" href="../../static/library/introjs.min-4.3.0.css">
        <link rel="stylesheet" type="text/css" href="../../static/library/introjs-rtl.min-4.3.0.css">

        <script src="../../static/library/notyf.min.js"></script>
        <link rel="stylesheet" type="text/css" href="../../static/library/notyf.min-npm.css">

        <!-- apexcharts -->
        <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>

        <link rel="stylesheet" href="../../static/styles/judge.css">

        <!-- Blocking UI -->
        <script src="../../static/js/blockUI.js"></script>
        <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"
            integrity="sha512-GsLlZN/3F2ErC5ifS5QtgpiJtWd43JWSuIgh7mbzZ8zBps+dvLusV+eNQATqgA/HdeKFVgA5v3S/cIrLF7QnIg=="
            crossorigin="anonymous" referrerpolicy="no-referrer">
            </script> -->
        <script src="../../static/library/html2pdf.bundle.min-0.9.3.js" integrity="sha512-YcsIPGdhPK4P/uRW6/sruonlYj+Q7UHWeKfTAkBW+g83NKM+jMJFJ4iAPfSnVp7BKD4dKMHmVSvICUbE/V1sSw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <!-- <link rel="stylesheet" href="../../static/styles/loader.css"> -->

        <link rel="stylesheet" href="../../static/styles/index2.css">
        <link rel="stylesheet" href="../../static/styles/information_chart.css">
        <link rel="stylesheet" href="../../static/styles/user_guide_tour.css">

        <!--<script type="text/javascript" src="http://l2.io/ip.js?var=myip">
        </script>-->

        <meta charset="UTF-8">

        <title> پروفایل قاضی</title>
        {% include "doc/title_icon.html" %}

        <script>
            $(document).ready(function () {
              $('#SepecificDropdown').addClass('active'); // header buttons
              $('#judge_behavior_analysis').addClass('active');
              $('select#language').on('change', function (e) {
                  let selected_language = this.value;
                  let current_url = window.location.href;
                  if (selected_language === 'England') {
                      let page_name = current_url.split('/')[3]
                      let requested_url = current_url.replace(page_name, 'en')
                      window.location = requested_url;
                  } else if (selected_language === 'Russia') {
                      let page_name = current_url.split('/')[3]
                      let requested_url = current_url.replace(page_name, 'ru')
                      window.location = requested_url;
                  }
              });
            });
        </script>
    </head>


    <body>
        <!-- Menu -->
        <nav dir="rtl" class="navbar nav_menu navbar-expand-lg fixed-top p-0 mt-0">
            {% include "doc/header2.html" %}
        </nav>

        <div class="container" style="margin-top: 120px">
            <div class="row" style="margin-top: 60px">
            <div class="col" style="align-content: end">
              <a href="{% url 'judge_dashboard' %}"><button  type="button" class="btn" style="background-color: #0e3f8b; color: #F0FFFF"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path fill="none" d="M0 0h24v24H0z"></path><path d="M21 11H6.83l3.58-3.59L9 6l-6 6 6 6 1.41-1.41L6.83 13H21z"></path></svg> بازگشت</button></a>
            </div>
            <div class="col">

            </div>
            <div class="col text-right" style="font-size: 25px">
                <h id="judge_name" dir="rtl">:تحلیل رفتاری قاضی ایکس</h>
            </div>

            <div class="row" style="margin-top: 20px">
            <div class="col">

               <div class="card text-center" style="background:#1e56a0">
                      <div class="card-body row justify-content-center flex-column" style="color:white; font-size: 20px; height: 355px;">
                        <i class="fa fa-solid fa-gavel" style="font-size: 30px; color: white; margin-top: 9px"></i>
                        <br>
                        <p class="card-title">تعداد دادنامه‌ها</p>
                        <p class="card-text" style="margin-top: 7px" id="num_of_judgements">...</p>
                        <a href="#" class="btn" style="background-color: #e2eefa; width: fit-content" onclick="ShowAlljudgementsModal()"> جزئیات</a>
                      </div>

                    </div>

            </div>
            <div class="col">

                <div class="card text-center" style="background:#1e56a0">

                      <div class="card-body row flex-column justify-content-center" style="color:white; font-size: 20px; height: 355px;">
                        <i class="fa fa-solid fa-gavel" style="font-size: 30px; color: white; margin-top: 9px"></i>
                        <br>
                        <p class="card-title">تعداد آرای ابطال</p>
                        <p class="card-text" style="margin-top: 7px" id="num_of_cancellations">...</p>
                        <a href="#" class="btn" style="background-color: #e2eefa; width: fit-content" onclick="ShowCancellationjudgementsModal()"> جزئیات</a>
                      </div>

                </div>

            </div>
            <div class="col">

                <div class="card text-center" style="background:#1e56a0">
                      <div class="card-body row flex-column justify-content-center" style="color:white; font-size: 20px; height: 355px;">
                          <i class="fa fa-solid fa-gavel" style="font-size: 30px; color: white; margin-top: 9px"></i>
                          <br>
                          <p class="card-title">تعداد دسته‌بندی‌ها </p>
                          <p class="card-text" style="margin-top: 7px" id="num_of_categories">...</p>
                          <a href="#" class="btn" style="background-color: #e2eefa; width: fit-content" onclick="ShowCategoriesModal()"> جزئیات</a>
                      </div>

                </div>

            </div>
            <div class="col">

                <div class="card text-center" style="background:#1e56a0">

                      <div class="card-body row flex-column justify-content-center" style="height: 355px;">
                          <i class="fa fa-solid fa-gavel" style="font-size: 30px; color: white; margin-top: 9px"></i>
                          <br>
                          <p class="card-text" style="color:white; font-size: 20px; margin-top: 7px" id="max_category" dir="rtl">بیش‌ترین فعالیت .... در دسته‌بندی ... بوده است</p>
                        <!-- <a href="#" class="btn" style="background-color: #e2eefa"> جزئیات</a> -->
                      </div>

                </div>

            </div>
          </div>
          </div>

            <div class="row" style="margin-top: 20px;">
                <div class="col-4 text-right p-2" style="background-color: #e2eefa; height: 435px;">
                    <div class="text-right" style="font-size: 20px"><strong>:نمودار دایره‌ای پراکندگی نوع دادنامه‌های قاضی</strong></div>
                    <div id="subject_type_chart" class="mt-5"></div>
                </div>

                <div class="col-8 p-2" style="background-color: #F0FFFF; height: 435px;">
                    <div class="text-right" style="font-size: 20px"><strong>:نمودار تعداد دادنامه‌های قاضی بر حسب سال</strong></div>
                    <div id="year_chart" class="mt-5"></div>
                </div>
            </div>

        </div>

        <!-- Modal Container for categories  -->
        <div class="modal fade" id="CategoriesModal">
          <div class="modal-dialog modal-dialog-scrollable modal-xl">
              <div class="modal-content">

                  <!-- Modal Header -->
                  <div style="direction: rtl !important;" class="modal-header">
                      <h3 id="CategoriesModalHeader" class="modal-title"> جزئیات </h3>
                      <button type="button" class="btn-close m-0" data-bs-dismiss="modal"></button>
                  </div>

                  <!-- Modal body -->
                  <div class="modal-body bg-light text-justify">
                      <div class="container" id="CategoriesModalBody" >
                      </div>
                  </div>

                  <!-- Modal footer -->
                  <div class="modal-footer">
                      <button type="button" class="btn btn-primary" data-bs-dismiss="modal">بستن</button>
                  </div>

              </div>
          </div>
      </div>

        <!-- Modal Container for Judgements Cards  -->
        <div class="modal fade" id="JudgementsCardsModal">
          <div class="modal-dialog modal-dialog-scrollable modal-xl">
              <div class="modal-content">

                  <!-- Modal Header -->
                  <div style="direction: rtl !important;" class="modal-header">
                      <h3 id="JudgementsCardsModalHeader" class="modal-title"> جزئیات </h3>
                      <button type="button" class="btn-close m-0" data-bs-dismiss="modal"></button>
                  </div>

                  <!-- Modal body -->
                  <div class="modal-body bg-light text-justify">
                      <div class="container" id="JudgementsCardsModalBody" >
                      </div>
                      <div class="table-responsive search_result_table mt-4">
                          <table class="table table-striped judgements_card_modal_table" style="min-height: 200px;" id="judgements_card_modal_table">
                          </table>
                      </div>
                  </div>

                  <!-- Modal footer -->
                  <div class="modal-footer">
                      <button type="button" class="btn btn-primary" data-bs-dismiss="modal">بستن</button>
                  </div>

              </div>
          </div>
      </div>

        <!-- Scrollbar -->
        <button id="scroll_btn" class="p-0" title="بالای صفحه" onclick="topFunction()">
            <i class="far fa-caret-square-up"></i>
        </button>
    </body>

    <!-- Blocking UI  -->
    <script src="../../static/js/blockUI.js"></script>
    <script src="../../static/js/blockUI_handler.js"></script>
    <link rel="stylesheet" href="../../static/styles/loader.css">
    <script>
      init()

      let categories = []
      let all_judgements_card_response;
      let cancellation_card_response;

      async function init() {
        startFullPageBlockUI();
        const url = new URL(window.location.href);
        var judge_id = url.searchParams.get("id");
        if (judge_id == null) {
          alert("لطفا ابتدا یک قاضی را انتخاب کنید")
          return;
        }
        request_link = 'http://' + location.host + "/get_judge_profile_data/" + judge_id + "/";
        response = await fetch(request_link).then(response => response.json());
        judge_name = response["judge_name"]
        document.getElementById("judge_name").innerText = "تحلیل رفتاری قاضی" + ": " + judge_name

        judgments_by_year = response["judgment_by_year"]
        if (Object.keys(judgments_by_year).length > 0) {
          await draw_year_chart(judgments_by_year)
        }

        judgments_by_subject_type = response["judgment_by_subject_type"]
        if (Object.keys(judgments_by_subject_type).length > 0) {
          await draw_subject_type_chart(judgments_by_subject_type)
        }

        fill_num_of_judgements(response["judgments_count"])

        cancellation_judgements = response["judgment_by_subject_type"]['درخواست ابطال']
        if (cancellation_judgements.length > 0) {
          fill_num_of_cancellations(cancellation_judgements, cancellation_judgements.length)
        }

        judgment_by_categories = response["judgment_by_categories"]
        if (Object.keys(judgment_by_categories).length > 0) {
          categories = Object.keys(judgment_by_categories)
          fill_num_of_categories(judgment_by_categories,Object.keys(judgment_by_categories).length)
        }

        fill_max_category_card(judge_name, judgment_by_categories)
        
        stopFullPageBlockUI("تحلیل رفتاری قاضی")

        await load_all_judgements_card_data(judge_id);
        await load_cancellation_card_data(judge_id);
      }

      async function draw_year_chart(judgments_by_year) {
        years = []
        counts = []
        for (var year in judgments_by_year) {
          years.push(year)
          counts.push(judgments_by_year[year].length)
        }
        var year_chart_options = {
          series: [{
          data: counts,
          name: 'تعداد دادنامه'
        }],
          chart: {
          type: 'bar',
          height: 350,
          fontFamily: 'vazir'
        },
        plotOptions: {
          bar: {
            borderRadius: 4,
            horizontal: false,
          }
        },
        dataLabels: {
          enabled: false
        },
        xaxis: {
          categories: years,
            title: {
              text: 'سال'
            }
        },
            yaxis: {
              title: {
                  text: 'تعداد دادنامه'
              }
            }
        };
        var year_chart = new ApexCharts(document.querySelector("#year_chart"), year_chart_options);
        year_chart.render();
      }

      async function draw_subject_type_chart(judgments_by_subject_type) {
        subject_types = []
        counts = []
        for (var subject_type in judgments_by_subject_type) {
          subject_types.push(subject_type)
          counts.push(judgments_by_subject_type[subject_type].length)
        }
        var subject_type_chart_options = {
          series: counts,
          chart: {
          width: 380,
          type: 'donut', // pie
          fontFamily: 'vazir'
        },
        labels: subject_types,
        fill: {
          opacity: 1
        },
        stroke: {
          width: 1,
          colors: undefined
        },
        yaxis: {
          show: false
        },
        legend: {
          position: 'bottom'
        },
        plotOptions: {
          polarArea: {
            rings: {
              strokeWidth: 0
            },
            spokes: {
              strokeWidth: 0
            },
          }
        },
        theme: {
          monochrome: {
            enabled: false,
            shadeTo: 'light',
            shadeIntensity: 0.6
          }
        }
        };
        var subject_type_chart = new ApexCharts(document.querySelector("#subject_type_chart"), subject_type_chart_options);
        subject_type_chart.render();
      }

      function fill_num_of_judgements(num_of_judgements) {
        document.getElementById("num_of_judgements").innerText = num_of_judgements;
      }

      function fill_num_of_cancellations(cancellation_judgements, cancellation_judgements_length) {
        document.getElementById("num_of_cancellations").innerText = cancellation_judgements_length
      }

      function fill_num_of_categories(judgment_by_categories, judgment_by_categories_length) {
        document.getElementById("num_of_categories").innerText = judgment_by_categories_length
      }

      function fill_max_category_card(judge_name, judgment_by_categories) {
        let maxKey = "نامشخص", maxValue = 0;

        for(const [key, value] of Object.entries(judgment_by_categories)) {
          if(value.length > maxValue) {
            maxValue = value.length;
            maxKey = key;
          }
        }
        text = "بیش‌ترین فعالیت وی در دسته‌بندی " + maxKey + " " + "بوده است.";

        document.getElementById("max_category").innerText = text;
      }

      async function ShowCategoriesModal() {
            document.getElementById('CategoriesModalHeader').innerHTML = "";
            document.getElementById('CategoriesModalBody').innerHTML = "";
            $('#CategoriesModal').modal('show');

            const header = 'دسته‌بندی‌های دادنامه‌های قاضی'
            let text = ''
            text += '<ol>'
            for (var cat in categories) {
                text += `<h4><li style="direction: rtl" > ${categories[cat]} </li></h4>`
            }
            text += '</ol>'
            document.getElementById('CategoriesModalHeader').innerText += header
            document.getElementById('CategoriesModalBody').innerHTML += text
        }

      async function ShowAlljudgementsModal() {
        // function in Judgement_search
        notyf.dismissAll();
        $('#JudgementsCardsModal').modal('show');
        startBlockUI('search_result_table');
        document.getElementById('JudgementsCardsModalHeader').innerHTML = ""
        const header = "جدول دادنامه‌ها"
        document.getElementById('JudgementsCardsModalHeader').innerHTML += header

        // const url = new URL(window.location.href);
        // var judge_id = url.searchParams.get("id");
        // const from_advisory_opinion_count = 0
        // const from_interpretation_rules_count = 0
        // const country_id = 1 // ?
        // let request_link = '';
        let place = 'عنوان'
        let search_type = "All"
        let text = "empty"
        // request_link = 'http://' + location.host + "/SearchJudgment_ES/" + country_id + "/" + judge_id + "/" +
        //     0 + "/" + 0 + "/" + 0 + "/" + 0 + "/" + 0 + "/" +
        //     from_advisory_opinion_count + "/" + from_interpretation_rules_count + "/" + place + "/" + text + "/" + search_type + "/";

        // let response = await fetch(request_link).then(response => response.json());

        /*  Show Table Result */
        total_hits = all_judgements_card_response["total_hits"]
        ES_SearchResult = all_judgements_card_response["result"]
        ES_Aggregations = all_judgements_card_response["aggregations"]

        FillAllJudgmentTable(ES_SearchResult, search_type, place, total_hits, text)
        stopBlockUI('search_result_table', "جدول دادنامه‌ها");
      }

      function FillAllJudgmentTable(documents_information_result, mode, where, total_hits, text) {

        // SearchResultValue = documents_information_result;
        // document.getElementById("SearchResultLable").innerText = "تعداد کل نتایج: " + total_hits + " سند"
        let index = 1;
        let document_result = []
        for (let doc of documents_information_result) {
            const doc_id = doc['_source']['document_id']
            var doc_name = doc['_source']['name']
            const doc_file_name = doc['_source']['document_file_name']
            const judgement_id = doc['_source']['judgment_id']
            const judgment_number = doc['_source']['judgment_number']
            const judgment_date = doc['_source']['judgment_date']
            const judgment_year = doc['_source']['judgment_year'] != 0 ? doc['_source']['judgment_year'] : 'نامشخص'
            const complaint_serial = doc['_source']['complaint_serial']
            const conclusion_display_name = doc['_source']['conclusion_display_name']
            const subject_type_display_name = doc['_source']['subject_type_display_name']
            const judgment_type = doc['_source']['judgment_type']
            const complainant = doc['_source']['complainant']
            const complaint_from = doc['_source']['complaint_from']
            const categories = doc['_source']['categories']
            const affected_document_name = doc['_source']['affected_document_name']

            let count = Math.round((doc['_score'] * 100)) / 100


            let button_disable = ""
            // if (mode === "All") {
            //     button_disable = "disabled"
            // }

            // const detail_function = `DetailFunction('${doc_id}','${doc_name}','${mode}', '${where}','${text}')`;
            // const detail = '<button type="button" class="btn modal_btn" data-bs-toggle="modal" ' + button_disable + ' onclick="' + detail_function + '" data-bs-target="#myModal">جزئیات</button>'

            const document_link = 'http://' + location.host + "/document_profile/?id=" + doc_id
            doc_name = '<a href="' + document_link + '">' + doc_name + "</a>"

            const row = {
                "index": index,
                "doc_id": doc_id,
                "doc_name": doc_name,
                "doc_file_name": doc_file_name,
                "judgment_id": judgement_id,
                "judgment_number": judgment_number,
                "judgment_date": judgment_date,
                "judgment_year": judgment_year,
                "complaint_serial": complaint_serial,
                "conclusion_display_name": conclusion_display_name,
                "subject_type_display_name": subject_type_display_name,
                "judgment_type": judgment_type,
                "complainant": complainant,
                "complaint_from": complaint_from,
                "categories": categories,
                "affected_document_name": affected_document_name,
                // "count": count,
                // "detail": detail
            }
            document_result.push(row)
            index += 1
        }
        $('#judgements_card_modal_table').empty();
        $('.judgements_card_modal_table').footable({
            "paging": {
                "enabled": true,
                strings: {
                first: '»',
                prev:'›',
                next: '‹',
                last: '«'
            }
            },
            "filtering": {
                "enabled": false
            },
            "sorting": {
                "enabled": true
            },
            "empty": "سندی یافت نشد.",
            "columns": [{
                "name": "index",
                "title": "ردیف",
                "breakpoints": "xs sm",
                "type": "number",
                "style": {
                    "width": "5%"
                }
            }, {
                "name": "doc_name",
                "title": "نام سند",
                "style": {
                    "width": "35%"
                }
            }, {
                "name": "judgment_number",
                "title": "شماره دادنامه",
                "style": {
                    "width": "10%"
                }
            }, {
                "name": "judgment_date",
                "title": "تاریخ دادنامه",
                "style": {
                    "width": "10%"
                }
            }, {
                "name": "complainant",
                "title": "شاکی",
                "style": {
                    "width": "10%"
                }
            }, {
                "name": "complaint_from",
                "title": "مشتکی عنه",
                "style": {
                    "width": "10%"
                }
            }, {
                "name": "subject_type_display_name",
                "title": "نوع دادنامه",
                "style": {
                    "width": "10%"
                }
            }
            // , {
            //     "name": "count",
            //     "title": "امتیاز",
            //     "style": {
            //         "width": "10%"
            //     }
            // }
            // ,
            //  {
            //     "name": "detail",
            //     "title": "جزئیات",
            //     "style": {
            //         "width": "10%"
            //     }
            // }
            ],
            "rows": document_result
        });
        }

      async function ShowCancellationjudgementsModal() {
        // function in Judgement_search
        notyf.dismissAll();
        $('#JudgementsCardsModal').modal('show');
        startBlockUI('search_result_table');
        document.getElementById('JudgementsCardsModalHeader').innerHTML = ""
        const header = "جدول آرای ابطال"
        document.getElementById('JudgementsCardsModalHeader').innerHTML += header

        // const url = new URL(window.location.href);
        // var judge_id = url.searchParams.get("id");
        // const from_advisory_opinion_count = 0
        // const from_interpretation_rules_count = 0
        // const country_id = 1 // ?
        // let request_link = 'http://' + location.host + "/get_judgment_subject_type_display_name/" + "درخواست ابطال" + "/";
        // let response = await fetch(request_link).then(response => response.json());
        // let SubjectTypeDisplayName = response["display_name_id"]
        // request_link = '';
        let place = 'عنوان'
        let search_type = "All"
        let text = "empty"
        // request_link = 'http://' + location.host + "/SearchJudgment_ES/" + country_id + "/" + judge_id + "/" +
        //     SubjectTypeDisplayName + "/" + 0 + "/" + 0 + "/" + 0 + "/" + 0 + "/" +
        //     from_advisory_opinion_count + "/" + from_interpretation_rules_count + "/" + place + "/" + text + "/" + search_type + "/";

        // response = await fetch(request_link).then(response => response.json());

        /*  Show Table Result */
        total_hits = cancellation_card_response["total_hits"]
        ES_SearchResult = cancellation_card_response["result"]
        ES_Aggregations = cancellation_card_response["aggregations"]

        FillAllJudgmentTable(ES_SearchResult, search_type, place, total_hits, text)
        stopBlockUI('SearchTable', "جدول آرای ابطال");
      }

      async function load_all_judgements_card_data(judge_id) {
        const from_advisory_opinion_count = 0
        const from_interpretation_rules_count = 0
        const country_id = 1 // ?
        let request_link = '';
        let place = 'عنوان'
        let search_type = "All"
        let text = "empty"
        request_link = 'http://' + location.host + "/SearchJudgment_ES/" + country_id + "/" + judge_id + "/" +
            0 + "/" + 0 + "/" + 0 + "/" + 0 + "/" + 0 + "/" +
            from_advisory_opinion_count + "/" + from_interpretation_rules_count + "/" + place + "/" + text + "/" + search_type + "/";

        all_judgements_card_response = await fetch(request_link).then(response => response.json());
      }

      async function load_cancellation_card_data(judge_id) {
        const from_advisory_opinion_count = 0
        const from_interpretation_rules_count = 0
        const country_id = 1 // ?
        let request_link = 'http://' + location.host + "/get_judgment_subject_type_display_name/" + "درخواست ابطال" + "/";
        let response = await fetch(request_link).then(response => response.json());
        let SubjectTypeDisplayName = response["display_name_id"]
        request_link = '';
        let place = 'عنوان'
        let search_type = "All"
        let text = "empty"
        request_link = 'http://' + location.host + "/SearchJudgment_ES/" + country_id + "/" + judge_id + "/" +
            SubjectTypeDisplayName + "/" + 0 + "/" + 0 + "/" + 0 + "/" + 0 + "/" +
            from_advisory_opinion_count + "/" + from_interpretation_rules_count + "/" + place + "/" + text + "/" + search_type + "/";

        cancellation_card_response = await fetch(request_link).then(response => response.json());
      }
    </script>


    <!-- BS Tooltips handler -->
    <script src="../../static/js/tooltip_handler.js"></script>
    {#<script src="../../static/js/UserLogSave.js"></script>#}

    <!-- Intro Js -->
    <script src="../../static/js/information/information_tour.js">
    </script>
    <script src="../../static/js/signout_function.js"></script>
    <script src="../../static/js/logincheck.js"></script>
    <script src="../../static/js/scroll_button_handler.js"></script>

    <!-- Blocking UI -->
    <!-- <script src="../../static/js/blockUI.js"></script>
    <script src="../../static/js/blockUI_handler.js"></script>
    <link rel="stylesheet" href="../../static/styles/loader.css"> -->

    <!-- zip file  -->
    <script src="../../static/js/zipDownload/jszip.min.js"></script>
    <script src="../../static/js/zipDownload/FileSaver.min.js"></script>

    <!-- graph  g6.antv -->
    <script src="../../static/library/g6.min-4.3.11.js"></script>

</html>